# AWS Shared Responsibility Matrix

The AWS Shared Responsibility Model defines how security and operational responsibilities are divided between AWS (security _of_ the cloud) and the customer (security _in_ the cloud). Below is a matrix for key services used or likely to be used in this foundational architecture.

| Service                              | AWS Responsibility (Security/Operations OF the Cloud)                                                                                                                                                     | Customer Responsibility (Security/Operations IN the Cloud)                                                                                                                                                                                                                                                                            |
| ------------------------------------ | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| EC2 (Elastic Compute Cloud)          | Physical facilities, hardware lifecycle, networking fabric, hypervisor, underlying virtualization security, infrastructure availability (power, cooling), isolation between tenants                       | Select and harden AMI/OS, apply OS & package patches, configure host-based firewall/iptables, instance IAM roles, data encryption (EBS, in-transit), key management (KMS usage), security groups & NACLs, intrusion detection/monitoring, application code security, backup/restore strategy                                          |
| EBS (Elastic Block Store)            | Replication within AZ for durability, physical storage media security, disk failure handling, snapshot storage infrastructure                                                                             | Volume encryption (enable KMS), snapshot scheduling & lifecycle policies, attaching/detaching volumes securely, wiping data before reuse (encryption-by-default helps), access policies via IAM, performance tuning (IOPS selection), backup retention and recovery validation                                                        |
| S3 (Simple Storage Service)          | Infrastructure durability (11 9's design), storage hardware maintenance, replication engine (if using CRR/SRR), availability of the service API                                                           | Bucket/object ACLs & policies, encryption configuration (SSE-S3, SSE-KMS, client-side), versioning, lifecycle rules, data classification, access logging (Server Access Logs / CloudTrail), MFA delete, object retention & legal holds, monitoring access anomalies                                                                   |
| RDS (Relational Database Service)    | Managed database engine installation, patching of underlying host OS & database engine (if using managed engines), automated backups infrastructure, Multi-AZ failover orchestration, storage replication | Database schema design, user / role management inside DB, query optimization, parameter groups (tuning), encryption at rest (enable), SSL/TLS enforcement for clients, data classification & masking, backup retention configuration, PITR validation, access control via security groups & IAM auth integration                      |
| DynamoDB                             | Service availability, replication across AZs, hardware provisioning, auto-scaling backend infrastructure, encryption at rest by default                                                                   | Table design (partition/sort keys), WCU/RCU capacity planning (or auto-scaling config), IAM policies for table access, item-level security logic, encryption key management (if using CMKs), backup (on-demand + PITR toggle), TTL settings, data lifecycle & access patterns optimization                                            |
| Lambda                               | Service runtime environment isolation, underlying execution environment provisioning, patching of managed runtimes, scaling infrastructure, service availability                                          | Function code security & logic, dependency management & patching (libraries), environment variables protection, IAM execution role least privilege, VPC configuration (if attached), concurrency controls (reserved concurrency), encryption of sensitive data (KMS), logging & monitoring (CloudWatch Logs, X-Ray), secrets handling |
| ECS / Fargate                        | Control plane (scheduling, cluster management), Fargate host OS & container runtime patching, task isolation (for Fargate), network infrastructure                                                        | Container image creation & hardening, application code, IAM task roles, security group configurations, cluster/task definitions (resource limits), data encryption (in transit & at rest), secrets injection (SSM/Secrets Manager), vulnerability scanning of images, logging/metrics configuration                                   |
| VPC (Virtual Private Cloud)          | Foundational networking infrastructure (physical network, isolation between VPCs), availability of networking constructs (route tables, IGWs, NAT service components)                                     | Designing network topology (subnets, CIDR), configuring route tables, Network ACLs, security groups, VPC Flow Logs enablement, private/public subnet segregation, hybrid connectivity (VPN/Direct Connect), endpoint policies, DNS resolution strategy, traffic monitoring & segmentation                                             |
| IAM (Identity and Access Management) | IAM service availability, secure storage and replication of IAM metadata, enforcement of global IAM control plane                                                                                         | Defining IAM users/roles/policies, applying least privilege & role separation, MFA enforcement, credential/key rotation, access reviews & revocation, permission boundary usage, SCPs & OU structure (if Organizations), monitoring CloudTrail for auth events                                                                        |
| CloudFront                           | Edge infrastructure (PoP network), hardware, TLS termination at edge (managed certs via ACM), DDoS protection integration (AWS Shield Standard), global scaling and availability                          | Distribution configuration (origins, behaviors, caching policies), custom domain & certificate association, access control (signed URLs/cookies), origin security (OAC/OAI, TLS to origin), cache invalidation, geo-restriction policies, logging/monitoring, WAF rule association                                                    |
| KMS (Key Management Service)         | KMS infrastructure availability, durability of key material (AWS-managed keys), HSM security controls, key generation process integrity                                                                   | Customer-managed key (CMK) policy design, key rotation (if using CMKs manual policy), grants management, key deletion scheduling, access auditing, separation of duties, deciding which data to encrypt and key hierarchy design                                                                                                      |
| CloudTrail                           | Service infrastructure for event collection & delivery, integrity of management event pipeline                                                                                                            | Enabling multi-region & organization trails, selecting data events (S3, Lambda, DynamoDB), choosing storage bucket & encryption, log file validation enablement, access controls on logs, retention & lifecycle, monitoring for anomalous events                                                                                      |
| Route 53                             | DNS service availability, global anycast network, DNSSEC key management (for hosted zone signing infrastructure)                                                                                          | Hosted zone record management, TTL strategy, enabling DNSSEC signing, traffic policy decisions (latency-based, geo), health checks configuration, failover policy design, access controls for record changes                                                                                                                          |


## Responsibility Themes

| Layer                         | AWS Primarily                                             | Customer Primarily                                                |
| ----------------------------- | --------------------------------------------------------- | ----------------------------------------------------------------- |
| Physical / Facilities         | Data center sites, physical security, hardware lifecycle  | (Not applicable)                                                  |
| Network Core                  | Backbone, isolation, DDoS layer (Shield Std)              | Network segmentation design, SG/NACL rules                        |
| Host / Virtualization         | Hypervisor, host OS (managed services)                    | Guest OS (EC2), container images, runtime config                  |
| Managed Service Control Plane | Service availability, patching of managed layers          | Service configuration, access policies, data modeling             |
| Data Protection               | Underlying storage durability & encryption infrastructure | Classify data, choose encryption keys, manage retention & backups |
| Identity & Access             | IAM service integrity                                     | IAM policy design, least privilege, MFA enforcement               |
| Monitoring & Logging          | Platform logs (some control plane), delivery guarantees   | Enable/aggregate logs, create alarms, detect & respond            |
| Application Logic             | (Not covered)                                             | Code security, dependency patching, input validation              |

## Key Findings

1. AWS secures the foundational infrastructure (compute, storage, networking, managed service control planes). Customers secure configuration, identity, data, and application layers.
2. Misconfiguration (e.g., public S3 buckets, permissive IAM policies) remains the dominant risk vector—not infrastructure compromise.
3. Automation (IaC, policy as code, continuous compliance) reduces drift and human error in customer-responsible domains.
4. Encryption is a shared space: AWS provides mechanisms; customers must decide scope, key ownership, and enforcement.
5. Observability requires customer action: enabling logs/metrics and creating actionable alerts—AWS does not auto-enable most detailed telemetry.

## Patching Responsiblity

| Component                                    | Patching Owner                              |
| -------------------------------------------- | ------------------------------------------- |
| Hypervisor                                   | AWS                                         |
| Physical Hosts                               | AWS                                         |
| Managed DB Engine (RDS)                      | AWS (minor version & OS)                    |
| EC2 Guest OS                                 | Customer                                    |
| Container Base Image (ECS/Fargate workloads) | Customer (unless AWS-provided image chosen) |
| Lambda Runtime                               | AWS (managed layers)                        |
| Lambda Function Dependencies                 | Customer                                    |
| KMS Keys (AWS-managed)                       | AWS                                         |
| KMS CMKs (rotation policy)                   | Customer (policy-driven)                    |
